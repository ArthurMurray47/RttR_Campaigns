rttr:RegisterTranslations(
{ 
    en = 
    { 
        Diary   = 'Diary',

        msg1    = 'Tagebuch des Quintus: 1. Eintrag am 3. März\n\nBis jetzt scheinen wir unentdeckt geblieben zu sein.\nDas ist hier aber auch ein verschwiegenes Plätzchen.\n\nEs wurde uns vom Kapitän der \"Markomannia\"\nmitgeteilt, das in dieser Gegend das Schiff gesichtet\nworden ist,welches in Venedig vor Anker lag, als der\nRaub geschah. Unserem geliebten Konsul Tyrannus Rex\nwurde seine Rüstung aus der Schatzkammer entwendet.',
        msgh1   = 'Errichten Sie ein Sägewerk.',

        msg2    = 'Tagebuch des Quintus: 2. Eintrag am 4. März\n\nAls unser Konsul sich von seinem Schreck erholt\nhatte, befahl er mir, die Rüstung wieder zu\nbeschaffen und all das daran beteiligte\nDiebesgesindel unschädlich zu machen. Als ob das so\neinfach wäre!\nZur Wiederherstellung seiner Handlungsfähigkeit\nbrauche er den Siegelring. Das kostbarste Stück sei\naber die dazugehörige Halskette. Über die würde er\nmir zur gelegenen Zeit Genaueres berichten.\nGlücklicherweise gab er mir als seinem Verwalter\nsämtliche Vollmachten über seine Untertanen und seine\nBesitztümer. Ich kann mir also bei Bedarf Schiffe und\ngeeignete Leute heraussuchen, die mir bei der\nVerfolgung der Diebe und bei der Wiederbeschaffung\ndieser unsersetzlichen Rüstung behilflich sein\nkönnen.',
        msgh2   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',

        msg3    = 'Tagebuch des Quintus: 3. Eintrag am 6. März\n\nGut, dass mein Spion so fix gearbeitet hat, als sich die Kunde von dem Raub verbreitet hat. Er hat nicht nur den Namen des Schiffes erfahren, dass nach dem Raub so schnell Richtung Südost abreiste, sondern auch in einer Hafenkneipe das vorläufige Ziel der Schifffahrt erlauscht. Deshalb waren wir innerhalb achtundvierzig Stunden reisefertig und sind mit der Dreimastbark \"Gloria\" unseres Konsuls ebenfalls in diese Richtung gesegelt. Glücklicherweise trafen wir vor vier Tagen die \"Markomannia\", deren Kapitän uns auf diese Spur setzte. Dann fanden wir diese versteckte Anlegestelle und beschlossen, hier unsere Nachforschungen zu beginnen.',
        msgh3   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',

        msg4    = 'Tagebuch des Quintus: 4. Eintrag am 8. März\n\nMein Steuermann versicherte mir, nie mehr mit einer\nDreimastbark solch eine Schiffsreise unternehmen zu\nwollen. Auch mir war nicht wohl zumute, als wir mit\nunserem Riesenschiff die letzten Meter bis zu diesem\nPlatz manöveriert sind. Eine Dreimastbark ist das\nrichtige Schiff, wenn unser geliebter Konsul in\nVenezia vom Plaza San Marco zum Lido flanieren will.\nDa hat unsere \"Gloria\" richtig was hergemacht. Aber\nhier wäre sie zu auffällig und viel zu unbeweglich.\nDeshalb haben wir sie zerlegt und alles Brauchbare\nzur Wiederverwendung gelagert. Auf dem Weg hierher\nsind uns die einheimischen Schaluppen begegnet, die\nmit einem Bruchteil der Besatzung einer Dreimastbark\ngesegelt werden können. Die sind hier richtig. Die\neingesparten Leute können wir anderweitig gut\ngebrauchen.',
        msgh4   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',

        msg5    = 'Tagebuch des Quintus: 5. Eintrag am 12. März\n\nWir haben das Zelt eines Einheimischen getroffen! Er\nlebt hier als Fallensteller und Schütze und hat eine\naußerordentliche Begabung, wenn es um das Herstellen\nvon Werkzeug geht. Wir fanden bei ihm 5 Bögen, 5 Äxte\nund 5 Spitzhacken. Ausserdem hat er sich einen\ngrösseren Vorrat von Schinken angelegt, den er aber\ngerne mit uns teilen möchte.\nEr erzählte uns, dass in den letzten Monaten\nwiederholt nubische Räuberbanden die Gegend hier\nunsicher gemacht haben. Deshalb wäre er froh, wenn er\nsich uns anschliessen könnte.\nAusserdem habe er vor etwa zwei Wochen auf dem höchsten Berg in diesem Gebiet ein grosses Feuer brennen sehen, was stets ein Versammlungszeichen dieser Banden darstelle. Dieser Berg liegt im Südwesten, sei aber äußerst unzugänglich und von Höhlen durchzogen.',
        msgh5   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',

        msg6    = 'Tagebuch des Quintus: 6. Eintrag am 13. März\n\nJetzt haben wir genug erfahren, um zu wissen, was zu\ntun ist! Zuerst einmal werden wir unsere Wirtschaft\nauf Vordermann bringen, damit wir im Falle eines\nZusammentreffens mit diesen Räuberbanden stets eine\npassende Antwort bereit haben. Dann werden wir uns\ndiesen Berg einmal genauer besehen, um dort die\nvorhandenen Spuren oder gar ein mögliches Versteck\ngenauer zu besehen. Und Drittens werden wir die\nGegend mit unseren neu gebauten Schiffen untersuchen,\num uns ein genaues Bild machen zu können. Bei allem\nmüssen wir sehr vorsichtig sein, weil wir nicht um\ndie Anzahl und die Stärke dieser Räuberbanden wissen.',
        msgh6   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',

        msg7    = 'Tagebuch des Quintus: 7. Eintrag am 18. März\n\nPflugspuren im Boden deuten darauf hin, dass dieses\nLand schon einmal bebaut wurde. Unser Einheimischer\nberichtet von einer Anlegestelle im Nordwesten, die\nvor Jahren rege genutzt wurde. Nach seinen\nBeobachtungen wurde vor allem Gold umgeschlagen, was\nauf einen ergiebigen Fundort in der Nähe hinweisen\nkönnte. Allerdings sei dieser Hafen in der letzten\nZeit etwas in Vergessenheit geraten. Er habe in den\nletzten Jahren dort nur noch wenige Schiffe bemerkt.\nUnsere Soldaten haben mir ihren Kummer geklagt. Sie\nsollen für uns alle ihren Kopf bei gleicher Bezahlung\nhinhalten. Ich habe ihnen daraufhin eine Extra-Zulage\nin Goldmünzen versprochen. Deshalb bin ich für jede\nGoldader dankbar, die mir diesen versprochenen Sold\nherzustellen hilft.',
        msgh7   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',
        
        msg8    = 'Tagebuch des Quintus: 8. Eintrag am 2. April\n\nDas war eine Kletterei! Die Spuren hier lassen auf mehrere Räuberbanden schliessen, die hier ihre Zusammenkünfte abhalten. Ausserdem ist der Boden voller Goldstaub, wir müssen also genauer nachsehen, was es aus dem Berg zu holen gibt. Und hier ist tatsächlich eine Höhle und darin - Hurra! - die Schuhe unseres Konsuls. Ausserdem fanden wir noch einige Pläne und schriftliche Unterlagen. Leider ist unser \"Schriftgelehrter\" in unserem Stützpunkt zurückgeblieben, so dass wir die zweifellos nubischen Texte noch nicht entziffern können.\n\nBevor unser Auftrag hier vollständig erledigt ist,\nmüssen wir die wahrscheinlich noch vorhandenen\nStützpunkte der Diebe aufstöbern und zerstören. Aber\ninzwischen läuft unsere Wirtschaft ganz gut. Auch das\nMilitär ist viel schlagkräftiger geworden, als wir\ndie Goldmünzen-Zulage für sie eingeführt haben. Hier\nsollten wir aber noch nachlegen.',
        msgh8   = 'Erkunden und erschließen Sie die das umliegende\nGebiet.',
        
        msg101  = 'Eine sumpfige Gegend ist das hier! Wir müssen uns in\njeder Hinsicht hier vorsichtig bewegen. Aber Wild und\nFische scheint es hier reichlich zu geben. Da ich um\nden guten Appetit unsrer Bergbauer weiss, sollten wir\nuns mit Nahrungsmittel reichlich versehen. Wer weiss,\nob man hier überhaupt Getreide anpflanzen kann?',

        msg102  = 'Dieser Sumpf ist hier tatsächlich unpassierbar. Wir\nmüssen umkehren und uns einen anderen Weg suchen.\nAber vorher schauen wir uns noch die Berge an Ort und\nStelle an, ob sie nichts Verwertbares für uns\nbereithalten.',
        
        msg103  = 'Hier hat keine 48 Stunden vorher ein Lagerfeuer\ngebrannt. Dicht bei der Anlegestelle fanden wir eine\nFeuerstelle, deren Steine noch warm waren. Hier\nheisst es also aufpassen, damit wir keine unliebsamen\nBegegnungen erleben müssen. Von diesem Platz führt\nübrigens ein gut ausgetretener Pfad landeinwärts. Er\nkönnte uns zu dem hohen Berg bringen, den unser\nEinheimischer uns näher beschrieben hat. Ausserdem\nhat es hier eine Menge Wild, das wir gleich an Ort\nund Stelle erlegen und braten werden. Unser\nStützpunkt braucht Bodenschätze, und unsere\nBergbauer, die sich darum kümmern, brauchen Nahrung.',
        
        msg104  = 'Die Bucht scheint voller Treibholz zu sein. Als sich\nunserer "Gloria" hier durchgezwängt hat, waren die\nPlanken und Fässer auf dem See noch nicht vorhanden.\nHier scheint ein nubisches Schiff verunglückt zu\nsein, wie wir anhand der Schiffstrümmer\nübereinstimmend festgestellt haben. Einige Fässer\nhaben wir aufgefischt, sie enthielten 20 Schwerte, 20\nSchilde und dreissig Hämmer. Auch etwa 200 kleine\nFässer mit Flüssigkeit haben wir bergen können. Einer\nunserer Leute, der eine Zeit lang in Germanien\nstationiert war, meinte, anhand des Geruchs müsse es\nsich um Bier handeln. Die Nubier hier scheinen\ntatsächlich alles zu rauben, was ihnen unter die\nFinger kommt. Wir werden alles zu unserem Stützpunkt\nbringen, und dann schauen, wie wir die reichlich hier\nvorhandenen Steinvorkommen für uns nützen können.',
        
        msg105  = 'Der Boden hier ist voller nubischer Goldmünzen! Wir\nmüssen zuerst einmal den ganzen Platz hier nach\nFundschätzen untersuchen. Es gibt also doch\nDiebesbanden, die nur deswegen hier sind, um vom Raub\nzu leben. Sie scheinen sehr gut organisiert zu sein\nund sich gut hier eingelebt zu haben. Mit unseren\nwenigen Leuten halte ich eine handstreichartige\nVorgehensweise für wenig erfolgversprechend.\nAusserdem besteht die Gefahr, dass diese Banden hier\nnicht für sich allein ihr Unwesen treiben. Wir\nbewegen uns also erst einmal so unauffällig wie\nmöglich und schlagen nur dann zu, wo wirklich\nAussicht auf Erfolg besteht. Deshalb wollen wir\ngeeignete Anlegeplätze in der Nähe suchen, wo wir uns\nfestsetzen und erfolgversprechende Fronten zu Land\ngegen dieses Volk aufbauen können. Wenn diese Gegend\nnur nicht so unübersichtlich wäre...',
        
        msg200  = 'Tagebuch des Quintus: 9. Eintrag am 10. Mai\n\nEs ist geglückt, die Diebesbanden sind aus dieser\nGegend vertrieben worden und unser geliebter Tyrannus\nhat zumindest seine Schuhe wieder. Es ist gut zu\nwissen, dass auf unsere Leute Verlass ist, wenn sie\nhier so richtig gefordert sind. Das stimmt mich\nhoffnungsvoll für all die Abenteuer, die noch auf uns\nzukommen werden.\n\nUnser Schriftgelehrter hat die in der Höhle\ngefundenen Schriftstücke gesichtet, ist aber nicht\naus Allem schlau geworden. Er weiss aber anhand eines\ndort vorgefundenen Planes, wo sich ein grösserer\nStützpunkt befinden soll, den Nubier und auch\nWikinger zu räuberischen Zwecken benutzen. Dort\nwollen wir mit einer unseren Schaluppen hinsegeln.\nAusserdem geht ein zweites Schiff mit den Schuhen und\neinem Bericht von mir nach Venedig. Wir brauchen mehr\nSoldaten und Handwerker, damit wir schneller und\neffektiver vor Ort agieren können.',
        msgh200 = 'Sie haben es geschafft! Sie können jederzeit mit der\nnächsten Mission fortfahren.'
    }
})

-- main 1-99
-- side 1nn
-- end  200

eIdx = {1, 2, 3, 4, 5, 6, 7, 8, 101, 102, 103, 104, 105, 200}

function getRequiredLuaVersion()
    return 1.3
end

function getAllowedChanges()    
    return  { 
        ["addonsAll"]   = false,
        ["ownNation"]   = false,
        ["ownColor"]    = false,
        ["ownTeam"]     = false,
        ["aiNation"]    = false, 
        ["aiColor"]     = false,
        ["aiTeam"]      = false
            }    
end

function onSettingsReady()
    rttr:Log("-----------------------\n tyrann01.lua loaded... \n-----------------------")
    rttr:ResetAddons()                          -- S2-settings
    rttr:SetAddon(ADDON_FRONTIER_DISTANCE_REACHABLE, true)
    rttr:SetGameSettings({
        ["fow"] = EXP_CLASSIC,
        ["teamView"] = false,
        ["lockedTeams"] = false
    })

    rttr:GetPlayer(0):SetNation(NAT_ROMANS)
    rttr:GetPlayer(0):SetColor(0)

    rttr:GetPlayer(1):SetAI(3)
    rttr:GetPlayer(1):SetNation(NAT_AFRICANS)
    rttr:GetPlayer(1):SetColor(1)
    rttr:GetPlayer(1):SetName('Nubian Tribe')

    rttr:GetPlayer(2):SetAI(3)
    rttr:GetPlayer(2):SetNation(NAT_AFRICANS)
    rttr:GetPlayer(2):SetColor(2)
    rttr:GetPlayer(2):SetName('Nubian Tribe')
    
    rttr:GetPlayer(3):SetAI(3)
    rttr:GetPlayer(3):SetNation(NAT_AFRICANS)
    rttr:GetPlayer(3):SetColor(3)
    rttr:GetPlayer(3):SetName('Nubian Tribe')

    rttr:GetPlayer(1):SetTeam(TM_TEAM1)
    rttr:GetPlayer(2):SetTeam(TM_TEAM1)
    rttr:GetPlayer(3):SetTeam(TM_TEAM1)
end

-- start callback
function onStart(isFirstStart)
    for i = 0, (rttr:GetPlayerCount() - 1) do
        addPlayerRes(i, not isFirstStart)
        addPlayerBld(i, not isFirstStart)
    end

    eState = {}
    for _, i in ipairs(eIdx) do
        eState[i] = 1
    end

    if not isFirstStart then
        for i = 1, eHist["n"] do
            MissionEvent(eHist[i], true)
        end

    else
        eHist = {["n"] = 0}
        MissionEvent(1)
    end
end

-- save callback
function onSave(saveGame)
    saveGame:PushInt(eHist["n"])
    for i = 1, eHist["n"] do
        saveGame:PushInt(eHist[i])
    end
    return true
end

-- load callback
function onLoad(saveGame)
    eHist = {["n"] = saveGame:PopInt()}
    for i = 1, eHist["n"] do
        eHist[i] = saveGame:PopInt()
    end
    return true
end

function onGameFrame(gf)
    -- events called by GetBuildingCount(), GetWareCount() or GetPeopleCount()
    
    if(rttr:GetPlayer(0):GetNumBuildings(BLD_SAWMILL) > 0) then
        MissionEvent(2)
    end
    
    if(gf % 100 == 0) then
        storehouseCount = 0
    
        for p = 1, (rttr:GetPlayerCount() - 1) do
            storehouseCount = storehouseCount + rttr:GetPlayer(p):GetNumBuildings(BLD_HEADQUARTERS)
            storehouseCount = storehouseCount + rttr:GetPlayer(p):GetNumBuildings(BLD_STOREHOUSE)
            storehouseCount = storehouseCount + rttr:GetPlayer(p):GetNumBuildings(BLD_HARBORBUILDING)
        end
        
        if(storehouseCount == 0) then MissionEvent(200)
        end
    end

end

function onOccupied(p, x, y)
    -- only check human player
    if(p ~= 0) then
        return
    end

    if(     (x == 57) and (y == 57) )                               then MissionEvent(3)
    elseif( (x == 50) and (y == 62) )                               then MissionEvent(4)
    elseif( (x == 42) and (y == 52) )                               then MissionEvent(5)
    elseif( (x >= 34) and (x <= 38) and (y >= 37) and (y <= 45) )   then MissionEvent(6)
    elseif( (x >= 24) and (x <= 30) and (y >= 32) and (y <= 35) )   then MissionEvent(7)
    end
    
end

function onExplored(p, x, y)
    if(p ~= 0) then
        return
    end

    -- onExplored events
    if(     (x == 80) and (y == 80) )                               then MissionEvent(8)
    elseif( (x == 58) and (y == 36) )                               then MissionEvent(101)
    elseif( (x >= 59) and (x <= 63) and (y >= 13) and (y <= 25) )   then MissionEvent(102)
    elseif( (x == 60) and (y == 105) )                              then MissionEvent(103)
    elseif( (x >= 48) and (x <= 51) and (y >= 1) and (y <= 9) )     then MissionEvent(104)
    end
end


function addPlayerBld(p, onLoad)
    -- set buildings for all players
    rttr:GetPlayer(p):EnableAllBuildings()
    rttr:GetPlayer(p):DisableBuilding(BLD_CATAPULT, false)
    rttr:GetPlayer(p):DisableBuilding(BLD_LOOKOUTTOWER, false)
    --rttr:GetPlayer(p):DisableBuilding(BLD_METALWORKS, false)
    --rttr:GetPlayer(p):DisableBuilding(BLD_BREWERY, false)
end

-- Don't add goods/people onLoad!
function addPlayerRes(p, onLoad)
    if onLoad then return end

    rttr:GetPlayer(p):ClearResources()
    if(p == 0) then
        -- goods
        rttr:GetPlayer(p):AddWares({
            [GD_WOOD        ] =  6,
            [GD_BOARDS      ] = 11,
            [GD_STONES      ] = 17,
            [GD_HAM         ] =  0,
            [GD_GRAIN       ] =  0,
            [GD_FLOUR       ] =  0,
            [GD_FISH        ] =  1,
            [GD_MEAT        ] =  0,
            [GD_BREAD       ] =  2,
            [GD_WATER       ] =  0,
            [GD_BEER        ] =  0,
            [GD_COAL        ] =  4,
            [GD_IRONORE     ] =  4,
            [GD_GOLD        ] =  0,
            [GD_IRON        ] =  0,
            [GD_COINS       ] =  0,
            [GD_TONGS       ] =  0,
            [GD_AXE         ] =  1,
            [GD_SAW         ] =  0,
            [GD_PICKAXE     ] =  0,
            [GD_HAMMER      ] =  4,
            [GD_SHOVEL      ] =  1,
            [GD_CRUCIBLE    ] =  1,
            [GD_RODANDLINE  ] =  1,
            [GD_SCYTHE      ] =  2,
            [GD_CLEAVER     ] =  0,
            [GD_ROLLINGPIN  ] =  1,
            [GD_BOW         ] =  0,
            [GD_SWORD       ] =  0,
            [GD_SHIELD      ] =  0,
            [GD_BOAT        ] =  0
        })

        -- people
        rttr:GetPlayer(p):AddPeople({
            [JOB_HELPER             ] =  10,
            [JOB_BUILDER            ] =   2,
            [JOB_PLANER             ] =   1,
            [JOB_WOODCUTTER         ] =   2,
            [JOB_FORESTER           ] =   1,
            [JOB_STONEMASON         ] =   1,
            [JOB_FISHER             ] =   0,
            [JOB_HUNTER             ] =   1,
            [JOB_CARPENTER          ] =   1,
            [JOB_FARMER             ] =   0,
            [JOB_PIGBREEDER         ] =   0,
            [JOB_DONKEYBREEDER      ] =   0,
            [JOB_MILLER             ] =   0,
            [JOB_BAKER              ] =   0,
            [JOB_BUTCHER            ] =   0,
            [JOB_BREWER             ] =   0,
            [JOB_MINER              ] =   2,
            [JOB_IRONFOUNDER        ] =   0,
            [JOB_ARMORER            ] =   0,
            [JOB_MINTER             ] =   0,
            [JOB_METALWORKER        ] =   0,
            [JOB_SHIPWRIGHT         ] =   0,
            [JOB_GEOLOGIST          ] =   2,
            [JOB_SCOUT              ] =   1,
            [JOB_PACKDONKEY         ] =   2,
            [JOB_CHARBURNER         ] =   0,
            [JOB_PRIVATE            ] =  13,
            [JOB_PRIVATEFIRSTCLASS  ] =   0,
            [JOB_SERGEANT           ] =   0,
            [JOB_OFFICER            ] =   0,
            [JOB_GENERAL            ] =   0
        })

    elseif(p ~= 0) then
        -- goods
        rttr:GetPlayer(p):AddWares({
            [GD_WOOD        ] =  48,
            [GD_BOARDS      ] =  88,
            [GD_STONES      ] = 136,
            [GD_HAM         ] =   0,
            [GD_GRAIN       ] =   0,
            [GD_FLOUR       ] =   0,
            [GD_FISH        ] =   8,
            [GD_MEAT        ] =  12,
            [GD_BREAD       ] =  16,
            [GD_WATER       ] =   0,
            [GD_BEER        ] =   0,
            [GD_COAL        ] =  32,
            [GD_IRONORE     ] =  32,
            [GD_GOLD        ] =   0,
            [GD_IRON        ] =   0,
            [GD_COINS       ] =   0,
            [GD_TONGS       ] =   0,
            [GD_AXE         ] =  12,
            [GD_SAW         ] =   4,
            [GD_PICKAXE     ] =   4,
            [GD_HAMMER      ] =  32,
            [GD_SHOVEL      ] =   8,
            [GD_CRUCIBLE    ] =   8,
            [GD_RODANDLINE  ] =  12,
            [GD_SCYTHE      ] =  16,
            [GD_CLEAVER     ] =   4,
            [GD_ROLLINGPIN  ] =   4,
            [GD_BOW         ] =   4,
            [GD_SWORD       ] =   0,
            [GD_SHIELD      ] =   0,
            [GD_BOAT        ] =  24
        })

        -- people
        rttr:GetPlayer(p):AddPeople({
            [JOB_HELPER             ] =  90,
            [JOB_BUILDER            ] =  20,
            [JOB_PLANER             ] =  12,
            [JOB_WOODCUTTER         ] =  16,
            [JOB_FORESTER           ] =   8,
            [JOB_STONEMASON         ] =   8,
            [JOB_FISHER             ] =   0,
            [JOB_HUNTER             ] =   4,
            [JOB_CARPENTER          ] =   8,
            [JOB_FARMER             ] =   0,
            [JOB_PIGBREEDER         ] =   0,
            [JOB_DONKEYBREEDER      ] =   0,
            [JOB_MILLER             ] =   0,
            [JOB_BAKER              ] =   0,
            [JOB_BUTCHER            ] =   0,
            [JOB_BREWER             ] =   0,
            [JOB_MINER              ] =  20,
            [JOB_IRONFOUNDER        ] =   0,
            [JOB_ARMORER            ] =   8,
            [JOB_MINTER             ] =   0,
            [JOB_METALWORKER        ] =   0,
            [JOB_SHIPWRIGHT         ] =   0,
            [JOB_GEOLOGIST          ] =  12,
            [JOB_SCOUT              ] =   4,
            [JOB_PACKDONKEY         ] =  16,
            [JOB_CHARBURNER         ] =   0,
            [JOB_PRIVATE            ] = 104,
            [JOB_PRIVATEFIRSTCLASS  ] =   0,
            [JOB_SERGEANT           ] =   0,
            [JOB_OFFICER            ] =   0,
            [JOB_GENERAL            ] =   0
        })
    end
end

function MissionText(e)
    local msg = _('msg' .. tostring(e))
    local msgh = _('msgh'.. tostring(e))

    if(msg ~= ('msg' .. tostring(e)) and msgh ~= ('msgh'.. tostring(e))) then
        rttr:MissionStatement(0, _('Diary'), msg .. '\n\n\n\n\n\n\n' ..msgh.. '\n\n\n\n\n\n\n', IM_SWORDSMAN, true)
        rttr:SetMissionGoal(0, msgh)
    elseif(msg ~= ('msg' .. tostring(e))) then
        rttr:MissionStatement(0, _('Diary'), msg .. '\n\n\n\n\n\n\n', IM_SWORDSMAN, true)
    end
end

function MissionEvent(e, onLoad)
    -- event e is inactive
    --rttr:Log("Event ID " ..e.. " triggered!")
    
    if(eState[e] <= 0) then
        return
    end

    -- call side effects for active events, check "eState[e] == 1" for multiple call events!
    if(e == 5 and not onLoad) then
        rttr:GetPlayer(0):AddWares({
            [GD_MEAT        ] =  30,
            [GD_AXE         ] =   5,
            [GD_PICKAXE     ] =   5,
            [GD_BOW         ] =   5,
        })
        
        rttr:GetPlayer(0):AddPeople({
            [JOB_METALWORKER        ] =   1,
        })
        
    elseif(e == 104 and not onLoad) then
        rttr:GetPlayer(0):AddWares({
            [GD_BEER        ] = 200,
            [GD_HAMMER      ] =  30,
            [GD_SWORD       ] =  20,
            [GD_SHIELD      ] =  20,
        })
    end

    -- update event state
    eState[e] = eState[e] - 1

    -- no history update or mission texts while loading
    if not onLoad then
        rttr:Log(">> Event: " .. e .. ",\teState[" .. e .. "] = " .. eState[e])
        eHist["n"] = eHist["n"] + 1
        eHist[eHist["n"]] = e
        MissionText(e)
    end
end